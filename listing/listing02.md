2. Что выведет программа? Объяснить вывод программы.
Объяснить как работают defer’ы и их порядок вызовов.

package main

import (
    "fmt"
)


func test() (x int) {
    defer func() {
        x++
    }()
    x = 1
    return
}


func anotherTest() int {
    var x int
    defer func() {
        x++
    }()
    x = 1
    return x
}


func main() {
    fmt.Println(test())
    fmt.Println(anotherTest())
}
_______________________________________________________________________________________________________________
ОТВЕТ:
ПРОГРАММА ВЫВЕДЕТ:
2
1

ПОЯСНЕНИЕ:
1) Функция test() выводит результат 2,
т.к. defer выполняется непосредственно перед return => после присвоения х значения == 1,
вызывается анонимная функция, увеличивающая значение х на 1, поэтому в результате получаем 2.
ВАЖНО: в данном случае, переменная x int – не вычислена до функции defer => она будет вычисляться, после x = 1.
2) Функция anotherTest() выводит результат 1,
т.к. на момент вызова defer, переменная x – вычислена и == 0 => отработав,
анонимная функция вернёт значение x++ (или 0 + 1). Поэтому в данном случае – defer не будет работать корректно.

DEFER:
это функция отложенного вызова, которая указывает внутренней функции на выполнение, перед выходом из внешней;
выполняется независимо от потока следующих функций; может использоваться в любом месте;
можно вызвать несколько defer-функций; как правило используется для освобождения ресурсов.
Правила работы с defer:
1) Последний отложенный вызов будет вызван первым;
2) Отложенные функции могут читать и устанавливать именованные возвращаемые значения внешней функции;
3) Аргументы отложенного вызова функции вычисляются тогда, когда вычисляется команда defer.